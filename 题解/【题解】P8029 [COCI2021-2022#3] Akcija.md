# 【题解】P8029 [COCI2021-2022#3] Akcija

状压 DP+Astar 算法。

## 题目链接

[P8029 [COCI2021-2022#3] Akcija](https://www.luogu.com.cn/problem/P8029)

## 题意概述

给定 $n$ 个商品，每个商品有一个价格 $w_i$ 和一个截止期 $d_i$，其中 $d_i$ 表示第 $i$ 个商品必须在第 $d_i$ 分钟之前完成购买。每次购买一个商品均需花费 $1$ 分钟进行下单，在下单之后才视为购买成功。

现可从这 $n$ 个商品中选择若干个（包括 $0$ 个）进行购买（每个商品最多购买一次），视为一种购买方案。

当一种购买方案内的商品数量大于另一种方案时，规定前者更优；当一种购买方案的商品数量与另一种相同且前者的总价格更低时，规定前者更优。求所有符合题意的购买方案中，第 $1 \sim k$ 优的方案的商品数量和总价格各是多少。

## 思路分析

首先这个题意可以转化为图论，

考虑 k 短路。

我们定义 $dp_{sta}$ 表示表示二进制状态 $sta$ 点集不连通的概率，那么 $1-dp_{sta}$ 就表示状态 $sta$ 内点集联通的概率。

考虑转移。

首先，根据之前某场模拟赛状压维护连通块的经验，为了防止重复，可以给它规定一个顺序。

这里可以直接枚举对于每个状态 $sta$，含有 $sta$ 这个状态中编号最小的点的子集 $pre$。

那么有：
$$
dp_{sta|(1<<i)}=\min(dp_{sta|(1<<i)},dp_{sta}+cost(sta,sta|(1<<i)))
$$
考虑 $cost$ 如何求。

观察发现，$cost$ 表示的两个状态之间的某种关系，即从一个状态转化到另一个状态的最小代价。

